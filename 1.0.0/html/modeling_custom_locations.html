

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Modeling Custom Locations &mdash; pwv_kpno 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Accessing PWV Data" href="accessing_data.html" />
    <link rel="prev" title="1. Installation and Setup" href="install.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pwv_kpno
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">1. Installation and Setup</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Modeling Custom Locations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-new-location">2.1. Creating a New Location</a></li>
<li class="toctree-l2"><a class="reference internal" href="#specifying-data-cuts">2.2. Specifying Data Cuts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#importing-a-new-location">2.3. Importing a New Location</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="accessing_data.html">3. Accessing PWV Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="atmospheric_modeling.html">4. Modeling the Atmosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="blackbody_modeling.html">5. Modeling a Black Body</a></li>
<li class="toctree-l1"><a class="reference internal" href="correcting_observations.html">6. Correcting Observations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pwv_kpno</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>2. Modeling Custom Locations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/modeling_custom_locations.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="modeling-custom-locations">
<h1>2. Modeling Custom Locations<a class="headerlink" href="#modeling-custom-locations" title="Permalink to this headline">¶</a></h1>
<p>By default <strong>pwv_kpno</strong> provides models for the PWV transmission function at
Kitt Peak National Observatory. However, pwv_kpno also provides atmospheric
modeling for user customized locations. Support for modeling multiple
locations is handled by the <code class="docutils literal notranslate"><span class="pre">package_settings</span></code> module, and allows modeling at
any location with a SuomiNet connected GPS receiver. A list of locations that
are available with a particular install of pwv_kpno can be retrieved by running</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pwv_kpno.package_settings</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">available_sites</span><span class="p">)</span>

<span class="go">    [&#39;kitt_peak&#39;]</span>
</pre></div>
</td></tr></table></div>
<p>The returned list will contain the default location (<code class="docutils literal notranslate"><span class="pre">kitt_peak</span></code>) in addition
to any custom locations that have been installed on your current machine.</p>
<div class="section" id="creating-a-new-location">
<h2>2.1. Creating a New Location<a class="headerlink" href="#creating-a-new-location" title="Permalink to this headline">¶</a></h2>
<p>Each site modeled by <strong>pwv_kpno</strong> is defined by a unique configuration file.
Using the ConfigBuilder class, users can create customized configuration files
for any SuomiNet site. As an example, we create a new model for the
Cerro Tololo Inter-American Observatory near La Serena, Chile.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pwv_kpno.package_settings</span> <span class="kn">import</span> <span class="n">ConfigBuilder</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_config</span> <span class="o">=</span> <span class="n">ConfigBuilder</span><span class="p">(</span>
<span class="go">    site_name=&#39;cerro_tololo&#39;, primary_rec=&#39;CTIO&#39;,</span>
<span class="go">    sup_rec=[],</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_config</span><span class="o">.</span><span class="n">save_to_ecsv</span><span class="p">(</span><span class="s1">&#39;./cerro_tololo.ecsv&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Here <code class="docutils literal notranslate"><span class="pre">site_name</span></code> specifies a unique identifier for the location being
modeled, <code class="docutils literal notranslate"><span class="pre">primary_rec</span></code> is the SuomiNet ID code for the GPS receiver
located at the modeled site, and <code class="docutils literal notranslate"><span class="pre">sup_rec</span></code> is a list of SuomiNet ID codes
for supplementary, off site receivers. Unlike the default model for KPNO, there
are no additional receivers near the CTIO and so <code class="docutils literal notranslate"><span class="pre">sup_rec</span></code> in this example
is left empty.</p>
<p>By default <strong>pwv_kpno</strong> models use MODTRAN estimates for the wavelength dependent
cross section of H$_2$O from 3,000 to 12,000 Angstroms. The optional
<code class="docutils literal notranslate"><span class="pre">wavelengths</span></code> and <code class="docutils literal notranslate"><span class="pre">cross_sections</span></code> arguments allow a user to customize
these cross sections in units of Angstroms and cm^2 respectively.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pwv_kpno.package_settings</span> <span class="kn">import</span> <span class="n">ConfigBuilder</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_config</span> <span class="o">=</span> <span class="n">ConfigBuilder</span><span class="p">(</span>
<span class="go">    site_name=&#39;cerro_tololo&#39;, primary_rec=&#39;CTIO&#39;,</span>
<span class="go">    sup_rec=[],</span>
<span class="go">    wavelength=custom_wavelengths, # Array of wavelengths in Angstroms</span>
<span class="go">    cross_section=custom_cross_sections # Array of cross sections in cm^2</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_config</span><span class="o">.</span><span class="n">save_to_ecsv</span><span class="p">(</span><span class="s1">&#39;./cerro_tololo.ecsv&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="specifying-data-cuts">
<h2>2.2. Specifying Data Cuts<a class="headerlink" href="#specifying-data-cuts" title="Permalink to this headline">¶</a></h2>
<p>If desired, users can specify custom data cuts on SuomiNet data used by the
package. Data cuts are defined using a 2d dictionary of boundary values.
The first key specifies which receiver the data cuts apply to. The second key
specifies what values to cut. Following SuomiNet’s naming convention, values
that can be cut include PWV (<code class="docutils literal notranslate"><span class="pre">{&quot;PWV&quot;</span></code>), the PWV error (<code class="docutils literal notranslate"><span class="pre">{&quot;PWVerr&quot;</span></code>),
surface pressure (<code class="docutils literal notranslate"><span class="pre">{&quot;SrfcPress&quot;</span></code>), surface temperature (<code class="docutils literal notranslate"><span class="pre">{&quot;SrfcTemp&quot;</span></code>),
and relative humidity (<code class="docutils literal notranslate"><span class="pre">{&quot;SrfcRH&quot;</span></code>).</p>
</div>
<div class="section" id="importing-a-new-location">
<h2>2.3. Importing a New Location<a class="headerlink" href="#importing-a-new-location" title="Permalink to this headline">¶</a></h2>
<p>Once a configuration file has been created, it can be permanently added to the
<strong>pwv_kpno</strong> package by running</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pwv_kpno.package_settings</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">settings</span><span class="o">.</span><span class="n">import_site</span><span class="p">(</span><span class="s1">&#39;./kitt_two_receivers.ecsv&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This command only needs to be run once, after which <strong>pwv_kpno</strong> will retain
the new model on disk, even in between package updates. The package can then be
configured to use the new model by running</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">settings</span><span class="o">.</span><span class="n">set_site</span><span class="p">(</span><span class="s1">&#39;kitt_two_receivers&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>After setting <strong>pwv_kpno</strong> to a new location, the package will exclusively use
the new model until the current Python environment is terminated. It is
important to note that this setting is not persistent. When <strong>pwv_kpno</strong> is
first imported into a new environment the package will always default to using
the standard model for Kitt Peak, and the above command will have to be rerun.</p>
<p>A complete summary of package settings can be accessed by printing the
<code class="docutils literal notranslate"><span class="pre">settings</span></code> object. Alternatively, individual settings can be accessed, but
not modified, using attributes</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">site_name</span><span class="p">)</span>
<span class="go">    kitt_two_receivers</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">available_sites</span><span class="p">)</span>
<span class="go">    [&#39;kitt_peak&#39;, &#39;kitt_two_receivers&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">receivers</span><span class="p">)</span>
<span class="go">    [&#39;AZAM&#39;, &#39;KITT&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">primary_rec</span><span class="p">)</span>
<span class="go">    KITT</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">supplement_rec</span><span class="p">)</span>
<span class="go">    []</span>
</pre></div>
</td></tr></table></div>
<p>Users can export the configuration file for the currently modeled location by
running</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">settings</span><span class="o">.</span><span class="n">export_site</span><span class="p">(</span><span class="s1">&#39;./kitt_two_receivers.ecsv&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="accessing_data.html" class="btn btn-neutral float-right" title="3. Accessing PWV Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="1. Installation and Setup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Daniel J. Perrefort.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>